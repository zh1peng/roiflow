% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/prep_data.R
\name{prep_spec}
\alias{prep_spec}
\title{Create Preprocessing Specification}
\usage{
prep_spec(
  roi_regex = "^(L_|R_)",
  numeric_regex = "^(L_|R_)|Age$|ICV$|mod_PDS$",
  zero_to_na_regex = "^(L_|R_)|^ICV$",
  factor_levels = list(Sex = "0", Group = "0"),
  site_col = "Site",
  site_ref = c("largest", "keep"),
  icv_col = "ICV",
  icv_scale = 1e+06,
  na_action = c("drop_required", "drop_all", "keep"),
  required_cols = NULL,
  outlier_action = c("clip", "flag", "none"),
  outlier_method = c("iqr", "sd"),
  outlier_k = 3
)
}
\arguments{
\item{roi_regex}{Character. Regular expression to identify ROI columns.
Default: \code{"^(L_|R_)"} matches columns starting with L_ or R_.}

\item{numeric_regex}{Character. Regular expression to identify columns that
should be converted to numeric. Default matches ROI columns, Age, ICV, and mod_PDS.}

\item{zero_to_na_regex}{Character. Regular expression to identify columns where
zeros should be converted to NA. Default matches ROI columns and ICV.}

\item{factor_levels}{Named list. Specifies factor variables and their reference
levels. Default: \code{list(Sex = "0", Group = "0")}.}

\item{site_col}{Character. Name of the site/scanner column. Default: \code{"Site"}.}

\item{site_ref}{Character or vector. How to set the site reference level:
\itemize{
  \item \code{"largest"}: Use the site with most observations (default)
  \item \code{"keep"}: Keep existing factor order
  \item A specific site name: Use that site as reference
}}

\item{icv_col}{Character. Name of the intracranial volume column. Default: \code{"ICV"}.}

\item{icv_scale}{Numeric. Factor to divide ICV by. Default: \code{1e6} (converts to millions).}

\item{na_action}{Character. How to handle missing data:
\itemize{
  \item \code{"drop_required"}: Drop rows with NA in required columns (default)
  \item \code{"drop_all"}: Drop rows with any NA
  \item \code{"keep"}: Keep all rows
}}

\item{required_cols}{Character vector. Columns that must be complete for
\code{na_action = "drop_required"}. If NULL (default), inferred as key covariates
(Site, Sex, Group, Age, ICV if present).}

\item{outlier_action}{Character. How to handle outliers:
\itemize{
  \item \code{"clip"}: Clip outliers to fence boundaries (default)
  \item \code{"flag"}: Detect but don't modify
  \item \code{"none"}: Skip outlier detection
}}

\item{outlier_method}{Character. Method for outlier detection:
\itemize{
  \item \code{"iqr"}: Interquartile range method (default)
  \item \code{"sd"}: Standard deviation method
}}

\item{outlier_k}{Numeric. Multiplier for outlier fences. Default: 3.
For IQR: fences at Q1 - k*IQR and Q3 + k*IQR.
For SD: fences at mean Â± k*SD.}
}
\value{
A list with class attributes containing all preprocessing specifications.
}
\description{
Creates a configuration object that controls how \code{\link{prep}} preprocesses
ROI data. This allows you to customize column detection patterns, factor levels,
outlier handling, and missing data policies.
}
\details{
The specification object controls all aspects of the preprocessing pipeline.
Common customizations:
\itemize{
  \item Change ROI pattern: \code{roi_regex = "^ROI_"}
  \item More conservative outliers: \code{outlier_k = 2.5}
  \item Keep all data: \code{na_action = "keep", outlier_action = "none"}
  \item Custom factor levels: \code{factor_levels = list(Sex = "M", Diagnosis = "HC")}
}
}
\examples{
# Default specification
spec <- prep_spec()

# Custom ROI pattern and stricter outlier detection
spec <- prep_spec(
  roi_regex = "^ROI_",
  outlier_k = 2.5,
  outlier_method = "sd"
)

# Keep all data, no outlier clipping
spec <- prep_spec(
  na_action = "keep",
  outlier_action = "flag"
)

# Use specific site as reference
spec <- prep_spec(site_ref = "SITE_A")

}
\seealso{
\code{\link{prep}} for the main preprocessing function
}
